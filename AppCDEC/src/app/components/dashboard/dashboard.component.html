<app-navbar></app-navbar>

<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Demandas</h1>
    <div class="filter-buttons">
      <button
        [class.active]="selectedStatus === 'all'"
        (click)="onFilterChange('all')"
      >
        Todas
      </button>
      <button
        [class.active]="selectedStatus === 'pending'"
        (click)="onFilterChange('pending')"
      >
        Pendentes
      </button>
      <button
        [class.active]="selectedStatus === 'in_progress'"
        (click)="onFilterChange('in_progress')"
      >
        Em Andamento
      </button>
      <button
        [class.active]="selectedStatus === 'completed'"
        (click)="onFilterChange('completed')"
      >
        Concluídas
      </button>
    </div>
  </div>

  <div class="loading" *ngIf="loading">
    Carregando demandas...
  </div>

  <div class="demands-grid" *ngIf="!loading">
    <div
      *ngFor="let demand of filteredDemands"
      class="demand-card"
      (click)="viewDemand(demand.id)"
    >
      <div class="demand-header">
        <span class="demand-status" [class]="demand.status">
          {{ getStatusText(demand.status) }}
        </span>
        <!-- <span class="demand-priority" [class]="demand.priority">
          {{ getPriorityText(demand.priority) }}
        </span> -->
      </div>

      <h3 class="demand-title">{{ demand.titulo }}</h3>
      <p class="demand-description">{{ demand.descricao }}</p>

      <div class="demand-footer">
        <!-- <div class="demand-citizen">
          <strong>Cidadão:</strong> {{ demand.citizen?.name }}
        </div>
        <div class="demand-date">
          {{ formatDate(demand.created_at) }}
        </div> -->
        <div class="demand-citizen">
          <strong>CPF:</strong> {{ demand.cpfCidadao }}
        </div>
      </div>
    </div>

    <div class="empty-state" *ngIf="filteredDemands.length === 0">
      <p>Nenhuma demanda encontrada</p>
    </div>
  </div>
</div>
